/*Inspired by Space Balls. Coded by Allanon, enjoy.*/

#include <mudlib.h>
#include <damage.h>

inherit WEAPON;

void extra_create()
{
  set_identified(1);
  set_short("The Schwartz %^RESET%^%^ORANGE%^<force glow>%^RESET%^");
  set_id(({"the schwartz", "The schwartz", "The Schwartz", "schwartz",
  "Schwartz"}));
  set_long(wrap("The Schwartz is an unknown power, generated by who knows "+
  "what. Only %^BOLD%^Yogurt%^RESET%^ and  a few others have ever been able "+
  "to master its powers...\n"+
  "\n"+
  "You hear Yogurt's voice in your head as you contemplate The Schwartz...\n"+
  "%^BOLD%^%^RED%^Never destruct The Schwartz, if you are wearing the "+
  "Schwartz Ring! Bad arguments can result!%^RESET%^\n"));
  set_name("Schwartz");
  set_wtype("executioner's sword");
  set_material("mithril");
  set_quality(75);
  set_prevent_drop(1);
  set_remove_func("can_remove");
  weapon_setup();
}

int cant_remove()
{
  object p = this_object()->query_user();
  message("remove_fail","Yogurt's voice booms in your head: 'The Schwartz "+
  "cannot be removed! Only the ring! Remember...da ring!'\n",p);
  message("remove_fail","You find yourself unable to remove The Schwartz "+
  "%^RESET%^%^ORANGE%^<force glow>%^RESET%^.\n",p);
  message("remove_fail",""+p->query_cap_name()+" is unable to remove "+
  "The Schwartz %^RESET%^%^ORANGE%^<force glow>%^RESET%^.\n",environment(p),p);
  return -1;	
}

int can_remove()
{
  call_out("dest_me",0);
  return 1;	
}

void dest_me()
{
  this_object()->remove();	
}

mixed * query_dtypes() {return ({MAGICAL, 100});} 

string query_special_feature() 
{ 
return "It does not interfere with casting.\n"+
       "It deals an additional 3x damage on a successful hit.\n";
} 

int query_casterweapon()
{
	return 1;
}

int query_damage() {return 1000000;} 
int query_size() {return 50;} 
int query_speed() {return 1;}
int query_mass() {return 1;}
int query_bulk() {return 1;}
int query_wc() {return 10000;}

int special_hit(object target, int damage, string bodypart) 
{ 
  target->receive_damage(atoi(sprintf("%d",damage)) * 3, MAGICAL, 
  sprintf("%s"),bodypart);
  return 0; 
} 